# Server
PORT=3001
NODE_ENV=development

# -----------------------------------------------------------------------------
# Password reset: required env vars
# -----------------------------------------------------------------------------
# - FRONTEND_URL   : App domain (reset link + CORS). Dev: http://localhost:5173 | Prod: https://yourdomain.com
# - SEND_PASSWORD_RESET_EMAIL : "true" to send reset emails
# - SMTP_HOST, SMTP_PORT, SMTP_USER, SMTP_PASS : SMTP (e.g. Hostinger from hPanel)
# - MAIL_FROM      : Sender email (e.g. noreply@yourdomain.com)
# - Optional: PASSWORD_RESET_TOKEN_EXPIRY (e.g. "1h", "30m")

# -----------------------------------------------------------------------------
# Email Logo URL (for emails sent via Resend)
# -----------------------------------------------------------------------------
# IMPORTANT: Email clients cannot load images from localhost!
# Options:
#   1. Use your production frontend URL (logo must be in /public folder)
#   2. Upload logo to Cloudinary and use that URL
#   3. Leave unset - code will auto-fallback to production URL for localhost
# LOGO_URL=https://badmintonwebsitefrontend.vercel.app/ChibiLogo.png

# -----------------------------------------------------------------------------
# Domain / Frontend URL (single place for reset-password links and CORS)
# -----------------------------------------------------------------------------
# Development: http://localhost:5173
# Production: https://yourdomain.com (no trailing slash)
# Multiple origins (e.g. Vercel): comma-separated, e.g.:
#   FRONTEND_URL=https://badmintonwebsitefrontend.vercel.app
# First URL is used for reset-password links; all are allowed for CORS.
FRONTEND_URL="http://localhost:5173"

# Auth (use a long random string in production)
JWT_SECRET="your-jwt-secret-change-in-production"

# -----------------------------------------------------------------------------
# Cookie Domain (Safari compatibility for same-domain setup)
# -----------------------------------------------------------------------------
# Set to ".yourdomain.com" (with leading dot) when frontend and API share the same root domain.
# Example: frontend at chibibadminton.com.au, API at api.chibibadminton.com.au
#   COOKIE_DOMAIN=".chibibadminton.com.au"
# This makes cookies "first-party" and works in Safari (which blocks cross-origin cookies).
# Leave unset/empty for cross-origin setup (different domains) - note: Safari will block sign-in.
# COOKIE_DOMAIN=".chibibadminton.com.au"

# Optional: password reset token expiry (e.g. 1h, 30m). Default: 1h
# PASSWORD_RESET_TOKEN_EXPIRY="1h"


# -----------------------------------------------------------------------------
# Email Provider: Resend (recommended for production/Railway)
# -----------------------------------------------------------------------------
# Get API key from https://resend.com/api-keys (free tier: 3,000 emails/month)
# Required: Add DNS records (SPF, DKIM) in Hostinger for your domain
# When RESEND_API_KEY is set, emails are sent via Resend HTTP API (works on Railway)
RESEND_API_KEY="re_..."

# Sender email (must match verified domain in Resend)
MAIL_FROM="support@chibibadminton.com.au"

# Contact form / service request recipient
CONTACT_MAIL_TO="support@chibibadminton.com.au"

# Password reset feature toggle
SEND_PASSWORD_RESET_EMAIL="true"
PASSWORD_RESET_TOKEN_EXPIRY="1h"

# -----------------------------------------------------------------------------
# SMTP Fallback (optional - for local development without Resend)
# -----------------------------------------------------------------------------
# If RESEND_API_KEY is not set, falls back to SMTP (works on localhost, blocked on Railway)
# Hostinger Professional Email uses Titan - try smtp.titan.email if smtp.hostinger.com gives 535 auth error
# SMTP_HOST="smtp.titan.email"
# SMTP_PORT="465"
# SMTP_SECURE="true"
# SMTP_USER="support@chibibadminton.com.au"
# SMTP_PASS="your_smtp_password"

# Database (MySQL – matches schema: chibibadminton_db)
DB_HOST="localhost"
DB_PORT="3306"
DB_USER="root"
DB_PASSWORD="your_mysql_password"
DB_NAME="your_database_name"
# Optional: timezone for connection (e.g. Australia/Melbourne)
DB_TIMEZONE="Australia/Melbourne"

# Stripe (payments, refunds)
# Get keys from https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_PUBLISHABLE_KEY="pk_test_..." # for documentation reference only
# Webhook signing secret from Stripe Dashboard → Developers → Webhooks
STRIPE_WEBHOOK_SECRET="whsec_..."
STRIPE_CURRENCY="aud"
# BECS Direct Debit (Australian bank transfer): Enable in Stripe Dashboard → Settings → Payment methods → BECS Direct Debit
# No additional env vars needed - uses same STRIPE_SECRET_KEY
# Test mode: BSB 000-000, Account 000123456
#
# Apple Pay & Google Pay: Automatically included with card payments
# Enable in Stripe Dashboard → Settings → Payment methods → Apple Pay / Google Pay
# Apple Pay requires domain verification in Stripe Dashboard (add your production domain)
# Google Pay works automatically with no domain verification
# No additional env vars needed - uses same STRIPE_SECRET_KEY
#
# Stripe Link (one-click checkout): Enable in Stripe Dashboard → Settings → Payment methods → Link
#
# -----------------------------------------------------------------------------
# Stripe Webhook Configuration
# -----------------------------------------------------------------------------
# Configure webhooks in Stripe Dashboard → Developers → Webhooks
#
# Webhook URL for each environment:
#   Development (Vercel): https://your-backend.vercel.app/api/webhooks/stripe
#   Production (Railway): https://your-backend.up.railway.app/api/webhooks/stripe
#
# IMPORTANT: Each environment needs its own webhook with a unique signing secret.
# Copy the signing secret (whsec_...) and set STRIPE_WEBHOOK_SECRET for that environment.
#
# Required webhook events:
#   - checkout.session.completed      : Payment completed → confirm registration
#   - checkout.session.expired        : Session expired → mark payment as expired, cancel pending registrations
#   - checkout.session.async_payment_failed : BECS payment failed → cancel registration, mark payment failed
#   - payment_intent.payment_failed   : Card payment failed → mark payment failed
#   - payment_intent.requires_action  : 3D Secure/BECS mandate required → mark payment as requires_action
#   - charge.dispute.created          : Chargeback initiated → create dispute record, mark payment as disputed
#   - charge.dispute.updated          : Dispute status changed → update dispute record
#   - charge.dispute.closed           : Dispute resolved → update payment (won=completed, lost=refunded)
#   - charge.refunded                 : Refund completed → mark payment as refunded
#
# Checkout Session Expiration:
#   Sessions expire after 30 minutes by default (configured in stripeService.ts)
#   When expired, checkout.session.expired webhook is triggered

# Cron jobs (expire pending, process refunds). Use a random secret in production.
# CRON_SECRET="your-cron-secret"

# Frontend: Vite env for Stripe publishable key (exposed to client)
# VITE_STRIPE_PUBLISHABLE_KEY="pk_test_..."

# Cloudinary (for image uploads: avatars, gallery photos, product images, news images)
# Get these from https://cloudinary.com/ console: Dashboard → API Keys
CLOUDINARY_CLOUD_NAME="your_cloud_name"
CLOUDINARY_API_KEY="your_api_key"
CLOUDINARY_API_SECRET="your_api_secret"
